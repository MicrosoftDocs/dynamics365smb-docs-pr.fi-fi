---
title: "Rakennetiedot – nimikkeen seurannan kirjauksen rakenne | Microsoft Docs"
description: "Lisätietoja nimiketapahtumien käyttämisestä nimikkeen seurantanumeroiden ensisijaisina lähteinä."
services: project-madeira
documentationcenter: 
author: SorenGP
ms.service: dynamics365-financials
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: design, item tracking, posting, inventory
ms.date: 07/01/2017
ms.author: sgroespe
ms.translationtype: HT
ms.sourcegitcommit: 2c13559bb3dc44cdb61697f5135c5b931e34d2a8
ms.openlocfilehash: 72de5863bf2e7c64078a9ca5421202f00f439250
ms.contentlocale: fi-fi
ms.lasthandoff: 12/14/2017

---
# <a name="design-details-item-tracking-posting-structure"></a><span data-ttu-id="a30fd-103">Rakennetiedot: nimikkeen seurannan kirjauksen rakenne</span><span class="sxs-lookup"><span data-stu-id="a30fd-103">Design Details: Item Tracking Posting Structure</span></span>
<span data-ttu-id="a30fd-104">Varaston arvostustoiminnon hyödyntämiseksi ja yksinkertaisen ja vakaan ratkaisun saavuttamiseksi nimikkeen seurantanumeroiden ensisijaisena lähteenä käytetään nimiketapahtumia.</span><span class="sxs-lookup"><span data-stu-id="a30fd-104">To align with inventory costing functionality and to obtain a simpler and more robust solution, item ledger entries are used as the primary carrier of item tracking numbers.</span></span>  
  
<span data-ttu-id="a30fd-105">Tilausverkon yksiköiden ja tilausverkon ulkopuolisten yksiköiden nimikkeen seurantanumerot on määritetty **Varaustapahtuma**-taulukossa (T337).</span><span class="sxs-lookup"><span data-stu-id="a30fd-105">Item tracking numbers on order network entities and non-order network entities are specified in the **Reservation Entry** table (T337).</span></span> <span data-ttu-id="a30fd-106">Historiatietoihin liittyvät nimikkeen seurantanumerot noudetaan suoraan nimiketapahtumista, jotka liittyvät kyseiseen tapahtumaan.</span><span class="sxs-lookup"><span data-stu-id="a30fd-106">Item tracking numbers that are related to historical information are retrieved directly from the item ledger entries that are related to the transaction in question.</span></span> <span data-ttu-id="a30fd-107">Tämä tarkoittaa sitä, että nimiketapahtumat vaikuttavat kirjatun tilausrivin nimikeseurannan määrityksiin.</span><span class="sxs-lookup"><span data-stu-id="a30fd-107">This means that item ledger entries reflect the item tracking specification of the posted order line.</span></span>  
  
<span data-ttu-id="a30fd-108">**NImikkeenseurantarivit** -ikkuna vastaanottaa tietoja kohteesta T337 ja nimikkeen pääkirjan kirjauksista ja näyttää ne väliaikaistaulukon välityksellä, **Seurantaerittely** (T336).</span><span class="sxs-lookup"><span data-stu-id="a30fd-108">The **Item Tracking Lines** window retrieves the information from T337 and the item ledger entries and shows it through the temporary table, **Tracking Specification** (T336).</span></span> <span data-ttu-id="a30fd-109">T336 sisältää myös väliaikaiset tiedot kohteessa **Nimikkeenseurantarivien ikkuna** koskien nimikkeenseurantamääriä, jotka ovat jäljellä laskutusta varten.</span><span class="sxs-lookup"><span data-stu-id="a30fd-109">T336 also hold the temporary data in the **Item Tracking Lines window** for item tracking quantities that remain to be invoiced.</span></span>  
  
## <a name="one-to-many-relation"></a><span data-ttu-id="a30fd-110">Yhden suhde moneen</span><span class="sxs-lookup"><span data-stu-id="a30fd-110">One-to-Many Relation</span></span>  
<span data-ttu-id="a30fd-111">**Nimikekirjauksen suhde** -taulukko, jota käytetään yhdistämään tiliöity asiakirjan rivi liittyviin nimikkeen pääkirjan kirjauksiin, käsittää kaksi pääosaa:</span><span class="sxs-lookup"><span data-stu-id="a30fd-111">The **Item Entry Relation** table, which is used to link a posted document line with its related item ledger entries, consists of two main parts:</span></span>  
  
* <span data-ttu-id="a30fd-112">Osoitin kirjatulle asiakirjariville, **Rivinro**</span><span class="sxs-lookup"><span data-stu-id="a30fd-112">A pointer to the posted document line, the **Order Line No.**</span></span> <span data-ttu-id="a30fd-113">-kentässä.</span><span class="sxs-lookup"><span data-stu-id="a30fd-113">field.</span></span>  
* <span data-ttu-id="a30fd-114">Nimiketapahtumaan osoittava tapahtumanumero, **Nimiketapahtuman nro** kenttä.</span><span class="sxs-lookup"><span data-stu-id="a30fd-114">An entry number pointing to an item ledger entry, the **Item Entry No.** field.</span></span>  
  
<span data-ttu-id="a30fd-115">Olemassa olevan **Kirjausnro** -kentän toiminnallisuus, joka liittyy nimikkeen pääkirjan kirjaukseen tiliöityyn asiakirjariviin, käsittelee tyypillistä yksi yhteen -suhdetta, kun nimikkeen seurantanumeroita ei ole tiliöidyllä asiakirjarivillä.</span><span class="sxs-lookup"><span data-stu-id="a30fd-115">The functionality of the existing **Entry No.** field, which relates an item ledger entry to a posted document line, handles the typical one-to-one relation when no item tracking numbers exist on the posted document line.</span></span> <span data-ttu-id="a30fd-116">Jos nimikkeen seurantanumerot on olemassa, **Tapahtumanro**-kenttä jätetään tyhjäksi ja **Nimiketapahtuman suhde**-taulukko käsittelee yhden suhde moneen -suhdetta.</span><span class="sxs-lookup"><span data-stu-id="a30fd-116">If item tracking numbers exist, then the **Entry No.** field is left blank, and the one-to-many relation is handled by the **Item Entry Relation** table.</span></span> <span data-ttu-id="a30fd-117">Jos kirjatulla asiakirjarivillä on nimikkeen seurantanumeroita, mutta ne liittyvät vain yksittäiseen nimiketapahtumaan, **Tapahtumanro**-kenttä käsittelee suhteen ja **Nimiketapahtuman suhde**-taulukossa ei luoda tietuetta.</span><span class="sxs-lookup"><span data-stu-id="a30fd-117">If the posted document line carries item tracking numbers but only relates to a single item ledger entry, then the **Entry No.** field handles the relation, and the no record is created in the **Item Entry Relation** table.</span></span>  
  
## <a name="codeunits-80-and-90"></a><span data-ttu-id="a30fd-118">Koodiyksiköt 80 ja 90</span><span class="sxs-lookup"><span data-stu-id="a30fd-118">Codeunits 80 and 90</span></span>  
<span data-ttu-id="a30fd-119">Jos haluat jakaa nimiketapahtumat kirjauksen aikana, koodiyksikön 80 ja 90 koodi ympäröidään silmukoilla, jotka suoritetaan yleisen väliaikaisen tietueen muuttujien kautta.</span><span class="sxs-lookup"><span data-stu-id="a30fd-119">To split the item ledger entries during posting, the code in codeunit 80 and codeunit 90, is encircled by loops that run through global temporary record variables.</span></span> <span data-ttu-id="a30fd-120">Tämä koodi kutsuu koodiyksikköä 22 ja nimikepäiväkirjan riviä.</span><span class="sxs-lookup"><span data-stu-id="a30fd-120">This code calls codeunit 22 with an item journal line.</span></span> <span data-ttu-id="a30fd-121">Nämä muuttujat alustetaan silloin, kun asiakirjan rivillä on nimikkeiden seurantanumerot.</span><span class="sxs-lookup"><span data-stu-id="a30fd-121">These variables are initialized when item tracking numbers exist for the document line.</span></span> <span data-ttu-id="a30fd-122">Kun tätä silmukkarakennetta käytetään aina, koodi pysyy yksinkertaisena.</span><span class="sxs-lookup"><span data-stu-id="a30fd-122">To keep the code simple, this looping structure is always used.</span></span> <span data-ttu-id="a30fd-123">Jos asiakirjarivillä ei ole nimikkeen seurantanumeroita, yksittäinen tietue lisätään ja silmukka suoritetaan vain kerran.</span><span class="sxs-lookup"><span data-stu-id="a30fd-123">If no item tracking numbers exist for the document line, then a single record is inserted, and the loop runs only once.</span></span>  
  
## <a name="posting-the-item-journal"></a><span data-ttu-id="a30fd-124">Nimikepäiväkirjan kirjaaminen</span><span class="sxs-lookup"><span data-stu-id="a30fd-124">Posting the Item Journal</span></span>  
<span data-ttu-id="a30fd-125">Nimikkeen seurantanumerot siirretään varaustapahtumien kautta, jotka liittyvät nimiketapahtumaan ja kierrätys nimikkeen seurantanumeroiden läpi tapahtuu koodiyksikössä 22.</span><span class="sxs-lookup"><span data-stu-id="a30fd-125">Item tracking numbers are transferred via the reservation entries that relate to the item ledger entry, and the looping through item tracking numbers occurs in codeunit 22.</span></span> <span data-ttu-id="a30fd-126">Tämä käsite toimii samalla tavalla kuin nimikepäiväkirjariviä käytetään epäsuorasti myynti- tai ostotilauksen kirjaamiseen samalla tavalla kuin nimikepäiväkirjariviä käytetään suoraan.</span><span class="sxs-lookup"><span data-stu-id="a30fd-126">This concept works in the same way when an item journal line is used indirectly to post a sale or purchase order as when an item journal line is used directly.</span></span> <span data-ttu-id="a30fd-127">Kun nimikepäiväkirjaa käytetään suoraan, **Lähderivin tunnus** -kenttä osoittaa nimikepäiväkirjan riviin.</span><span class="sxs-lookup"><span data-stu-id="a30fd-127">When the item journal is used directly, the **Source Row ID** field points to the item journal line itself.</span></span>  
  
## <a name="code-unit-22"></a><span data-ttu-id="a30fd-128">Koodiyksikkö 22</span><span class="sxs-lookup"><span data-stu-id="a30fd-128">Code Unit 22</span></span>  
<span data-ttu-id="a30fd-129">Koodiyksiköt 80 ja 90 käyvät silmukassa läpi koodiyksikön 22 kutsun nimikkeen seurantanumeroiden laskujen kirjauksen aikana ja vastaanottojen olemassa olevien toimitusten laskutuksen aikana.</span><span class="sxs-lookup"><span data-stu-id="a30fd-129">Codeunits 80 and 90 loop the call of codeunit 22 during the invoice posting of item tracking numbers and during the invoicing of existing shipments or receipts.</span></span>  
  
<span data-ttu-id="a30fd-130">Nimikkeen seurantanumeroiden määräkirjauksen aikana koodiyksikkö 22 noutaa seurantanumerot kirjaukseen liittyvistä tapahtumista kohteesta T337.</span><span class="sxs-lookup"><span data-stu-id="a30fd-130">During quantity posting of item tracking numbers, codeunit 22 retrieves item tracking numbers from the entries in T337 that relate to the posting.</span></span> <span data-ttu-id="a30fd-131">Nämä tapahtumat asetetaan suoraan nimikepäiväkirjan riville.</span><span class="sxs-lookup"><span data-stu-id="a30fd-131">These entries are placed directly on the item journal line.</span></span>  
  
<span data-ttu-id="a30fd-132">Koodiyksikkö 22 käy läpi silmukassa nimikkeen seurantanumerot ja jakaa kirjauksen vastaaviin nimiketapahtumiin, joilla on nimikkeen seurantanumerot.</span><span class="sxs-lookup"><span data-stu-id="a30fd-132">Codeunit 22 loops through the item tracking numbers and splits the posting into the respective item ledger entries that carry the item tracking numbers.</span></span> <span data-ttu-id="a30fd-133">Tiedot siitä mitkä nimiketapahtumat luodaan palautetaan T337-taulukkoon käyttämällä väliaikaista T336-tietuetta, jota koodiyksikön 22 toiminto kutsuu.</span><span class="sxs-lookup"><span data-stu-id="a30fd-133">Information about which item ledger entries are created is returned to T337 by using a temporary T336 record, which is called by a procedure in codeunit 22.</span></span> <span data-ttu-id="a30fd-134">Tämä toiminto käynnistyy, kun koodiyksikön 22 suoritus on päättynyt, koska tässä vaiheessa koodiyksikön 22 objekti sisältää tiedot.</span><span class="sxs-lookup"><span data-stu-id="a30fd-134">This procedure is triggered when codeunit 22 has finished its run because at that point, the codeunit 22 object contains the information.</span></span> <span data-ttu-id="a30fd-135">Kun väliaikainen T336-tietue haetaan, koodiyksikkö 80 ja 90 luovat tietueet **Nimiketapahtuman suhde** -taulukkoon ja linkittävät luodun nimiketapahtuman luotuun toimitus- tai vastaanottoriviin.</span><span class="sxs-lookup"><span data-stu-id="a30fd-135">When the temporary T336 record is retrieved, codeunits 80 and 90 create records in the **Item Entry Relation** table to link the created item ledger entries to the created shipment or receipt line.</span></span> <span data-ttu-id="a30fd-136">Koodiyksiköt 80 tai koodiyksikkö 90 muuntaa tämän jälkeen väliaikaiset T336-tietueet todellisiksi T336-tietueiksi, jotka liittyvät kyseiseen riviin.</span><span class="sxs-lookup"><span data-stu-id="a30fd-136">Codeunits 80 or codeunit 90 then converts the temporary T336 records to real T336 records that are related to the line in question.</span></span> <span data-ttu-id="a30fd-137">Tämä muuntaminen tapahtuu kuitenkin vain, jos kirjattua asiakirjariviä ei poisteta, koska se on kirjattu vain osittain.</span><span class="sxs-lookup"><span data-stu-id="a30fd-137">However, this conversion occurs only if the posted document line is not deleted, because it is only partially posted.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a30fd-138">Katso myös</span><span class="sxs-lookup"><span data-stu-id="a30fd-138">See Also</span></span>  
<span data-ttu-id="a30fd-139">[Rakennetiedot: nimikkeen seuranta](design-details-item-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="a30fd-139">[Design Details: Item Tracking](design-details-item-tracking.md) </span></span>  
[<span data-ttu-id="a30fd-140">Rakennetiedot: nimikkeen seurannan rakenne</span><span class="sxs-lookup"><span data-stu-id="a30fd-140">Design Details: Item Tracking Design</span></span>](design-details-item-tracking-design.md)
