---
title: Yhteyden muodostaminen Microsoft Dataverseiin | Microsoft Docs
description: Voit integroida muita sovelluksia Business Centralin avulla Microsoft Dataversen kautta.
author: bholtorf
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 11/20/2020
ms.author: bholtorf
ms.openlocfilehash: e0713de255aabc599fbc80cf29f1bfa618a29003
ms.sourcegitcommit: 2e7307fbe1eb3b34d0ad9356226a19409054a402
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 12/17/2020
ms.locfileid: "4753915"
---
# <a name="connect-to-microsoft-dataverse"></a><span data-ttu-id="9d8b9-103">Yhteyden muodostaminen Microsoft Dataverseen</span><span class="sxs-lookup"><span data-stu-id="9d8b9-103">Connect to Microsoft Dataverse</span></span>
[!INCLUDE[prod_short](includes/cc_data_platform_banner.md)]

<span data-ttu-id="9d8b9-104">Tässä ohjeaiheessa kuvataan, kuinka [!INCLUDE[prod_short](includes/prod_short.md)] ja [!INCLUDE[cds_long_md](includes/cds_long_md.md)] välille määritetään yhteys.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-104">This topic describes how to set up a connection between [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="9d8b9-105">Yleensä yritykset luovat yhteyden integroidakseen ja synkronoidakseen tietoja toisen Dynamics 365 -liiketoimintasovelluksen kanssa. Sovellus voi olla esimerkiksi [!INCLUDE[crm_md](includes/crm_md.md)].</span><span class="sxs-lookup"><span data-stu-id="9d8b9-105">Typically, businesses create the connection to integrate and synchronize data with another Dynamics 365 business app, such as [!INCLUDE[crm_md](includes/crm_md.md)].</span></span>  

## <a name="before-you-start"></a><span data-ttu-id="9d8b9-106">Ennen aloittamista</span><span class="sxs-lookup"><span data-stu-id="9d8b9-106">Before You Start</span></span>

<span data-ttu-id="9d8b9-107">Ennen yhteyden luomista tarvitaan seuraavat tiedot:</span><span class="sxs-lookup"><span data-stu-id="9d8b9-107">There are a few pieces of information to have ready before you create the connection:</span></span>  

* <span data-ttu-id="9d8b9-108">Sen [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -ympäristön URL-osoite, johon haluat muodostaa yhteyden.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-108">The URL for the [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment that you want to connect to.</span></span> <span data-ttu-id="9d8b9-109">Jos käytät **Common Data Service -yhteyden määrityksen** asetusten ohjattua määritysopasta yhteyden luomiseen, ympäristöt löydetään. Sinun on kuitenkin annettava myös vuokraajan toisen ympäristön URL-osoite.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-109">If you use the **Common Data Service Connection Setup** assisted setup guide to create the connection we will discover your environments, but you can also enter the URL of another environment in your tenant.</span></span>  
* <span data-ttu-id="9d8b9-110">Sen tilin käyttäjätili ja salasana, jolla on järjestelmänvalvojan oikeudet [!INCLUDE[prod_short](includes/prod_short.md)]- ja [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -sovelluksessa.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-110">The user name and password of an account that has administrator permissions in [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
* <span data-ttu-id="9d8b9-111">Jos käytössäsi on [!INCLUDE[prod_short](includes/prod_short.md)]vuoden 2020 1. julkaisuaallon on-premises-versio 16.5, lue [Joitakin tunnettuja ongelmia](/dynamics365/business-central/dev-itpro/upgrade/known-issues#wrong-net-assemblies-for-external-connected-services) -artikkeli.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-111">If you have an on-premises [!INCLUDE[prod_short](includes/prod_short.md)] 2020 release wave 1, version 16.5, read the [Some Known Issues](/dynamics365/business-central/dev-itpro/upgrade/known-issues#wrong-net-assemblies-for-external-connected-services) article.</span></span> <span data-ttu-id="9d8b9-112">Sinun on toteutettava kuvattu kiertotapa, ennen kuin voit luoda yhteyden [!INCLUDE[cds_long_md](includes/cds_long_md.md)]en.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-112">You'll have to complete the described workaround before you can create your connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>

> [!Note]
> <span data-ttu-id="9d8b9-113">Seuraavat vaiheet koskevat [!INCLUDE[prod_short](includes/prod_short.md)] online -versiota.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-113">These steps describe the procedure for [!INCLUDE[prod_short](includes/prod_short.md)] online.</span></span>
> <span data-ttu-id="9d8b9-114">Jos käytössä [!INCLUDE[prod_short](includes/prod_short.md)] on-premises -versiota eikä Azure Active Directory -tiliä käytetä muodostamaan yhteyttä [!INCLUDE [cds_long_md](includes/cds_long_md.md)]en, integrointia varten on määritettävä käyttäjätilin käyttäjänimi ja salasana.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-114">If you are using [!INCLUDE[prod_short](includes/prod_short.md)] on-premises and are not using Azure Active Directory account to connect to [!INCLUDE [cds_long_md](includes/cds_long_md.md)], you must also specify a user name and password of a user account for the integration.</span></span> <span data-ttu-id="9d8b9-115">Tätä tiliä kutsutaan integroinnin käyttäjän tiliksi.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-115">This account is referred to as the "integration user" account.</span></span> <span data-ttu-id="9d8b9-116">Azure Active Directory -tiliä käytettäessä integroinnin käyttäjän tiliä ei tarvita eikä sitä näytetä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-116">If you are using an Azure Active Directory account the integration user account is not required or displayed.</span></span> <span data-ttu-id="9d8b9-117">Integroinnin käyttäjä määritetään automaattisesti, eikä sitä varten tarvita käyttöoikeutta.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-117">The integration user will be set up automatically and does not require a license.</span></span>

## <a name="set-up-a-connection-to-cds_long_md"></a><span data-ttu-id="9d8b9-118">Yhteyden määrittäminen [!INCLUDE[cds_long_md](includes/cds_long_md.md)]iin</span><span class="sxs-lookup"><span data-stu-id="9d8b9-118">Set Up a Connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span></span>

<span data-ttu-id="9d8b9-119">Jos todennustyyppi on jokin muu kuin Microsoft 365 -todennus, voit määrittää [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -yhteyden **Common Data Service -yhteyden määritys** -sivulla.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-119">For all authentication types other than Microsoft 365 authentication, you set up your connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on the **Common Data Service Connection Setup** page.</span></span> <span data-ttu-id="9d8b9-120">Microsoft 365 -todennuksessa on suositeltavaa käyttää **Common Data Service -yhteyden määrityksen** asetusten ohjattua määritysopasta.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-120">For Microsoft 365 authentication, we recommend that you use the **Common Data Service Connection Setup** assisted setup guide.</span></span> <span data-ttu-id="9d8b9-121">Opas auttaa määrittämään nopeasti yhteyden ja lisäominaisuudet, kuten omistajamallin ja ensimmäisen synkronoinnin.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-121">The guide makes it easier to set up the connection and specify advanced features, such as the ownership model and initial synchronization.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="9d8b9-122">[!INCLUDE[cds_long_md](includes/cds_long_md.md)] -yhteyttä määritettäessä järjestelmänvalvojaa pyydetään antamaan seuraavat käyttöoikeudet rekisteröidylle Azuren [!INCLUDE[prod_short](includes/prod_short.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -sovellukselle:</span><span class="sxs-lookup"><span data-stu-id="9d8b9-122">During the setup of the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], the administrator will be asked to give following permissions to a registered Azure application named [!INCLUDE[prod_short](includes/prod_short.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:</span></span>
>
> * <span data-ttu-id="9d8b9-123">**[!INCLUDE[cds_long_md](includes/cds_long_md.md)]n käyttö sinuna** -käyttöoikeus tarvitaan, jotta [!INCLUDE[prod_short](includes/prod_short.md)] voi luoda järjestelmänvalvojan puolesta automaattisesti [!INCLUDE[prod_short](includes/prod_short.md)] Integration -sovelluksen käyttäjän, jolla ei ole käyttö- eikä vuorovaikutusoikeutta, määrittää käyttöoikeusroolit kyseiselle käyttäjälle ja ottaa käyttöön [!INCLUDE[prod_short](includes/prod_short.md)]in perustason CDS -integrointiratkaisun [!INCLUDE[cds_long_md](includes/cds_long_md.md)]en.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-123">**Access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] as you** permission is needed so [!INCLUDE[prod_short](includes/prod_short.md)] can, on behalf of administrator, automatically create non-licensed non-interactive [!INCLUDE[prod_short](includes/prod_short.md)] Integration application user, assign security roles to this user and to deploy [!INCLUDE[prod_short](includes/prod_short.md)] Base CDS Integration Solution to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="9d8b9-124">Tätä käyttöoikeutta käytetään vain kerran määritettäessä yhteyttä [!INCLUDE[cds_long_md](includes/cds_long_md.md)]en.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-124">This permission is used only once during set up of connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
> * <span data-ttu-id="9d8b9-125">**Täydet Dynamics 365 [!INCLUDE[prod_short](includes/prod_short.md)] -käyttöoikeudet** tarvitaan, jotta automaattisesti luotu [!INCLUDE[prod_short](includes/prod_short.md)] Integration -sovelluksen käyttäjä voi käyttää synkronoitavia [!INCLUDE[prod_short](includes/prod_short.md)]in tietoja.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-125">**Have full access to Dynamics 365 [!INCLUDE[prod_short](includes/prod_short.md)]** permission is needed so automatically created [!INCLUDE[prod_short](includes/prod_short.md)] Integration application user can access [!INCLUDE[prod_short](includes/prod_short.md)] data that will be synchronized.</span></span>  
> * <span data-ttu-id="9d8b9-126">**Kirjautuminen ja profiilin lukeminen** -käyttöoikeus tarvitaan varmistamaan, että kirjautuvalle käyttäjälle on määritetty järjestelmänvalvojan käyttöoikeusrooli [!INCLUDE[cds_long_md](includes/cds_long_md.md)]ssa.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-126">**Sign in and read your profile** permission is needed to verify user logging in actually has System Administrator security role assigned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
>
> <span data-ttu-id="9d8b9-127">Antamalla suostumuksen organisaation puolesta järjestelmänvalvoja antaa [!INCLUDE[prod_short](includes/prod_short.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -nimiselle Azure-sovelluksen oikeuden synkronoida tietoja käyttämällä automaattisesti luodun [!INCLUDE[prod_short](includes/prod_short.md)] Integration -sovelluksen käyttäjän tunnistetietoja.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-127">By giving consent on behalf of organization, the administrator is entitling the registered Azure application called [!INCLUDE[prod_short](includes/prod_short.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to synchronize data using automatically created [!INCLUDE[prod_short](includes/prod_short.md)] Integration application user's credentials.</span></span>

### <a name="to-use-the-common-data-service-connection-setup-assisted-setup-guide"></a><span data-ttu-id="9d8b9-128">Common Data Service -yhteyden määrityksen asetusten ohjatun määritysoppaan käyttäminen</span><span class="sxs-lookup"><span data-stu-id="9d8b9-128">To use the Common Data Service Connection Setup assisted setup guide</span></span>
<span data-ttu-id="9d8b9-129">Common Data Service -yhteyden asetusopas helpottaa sovellusten yhdistämistä, ja se voi auttaa sinua myös suorittamaan ensimmäisen synkronoinnin.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-129">The Common Data Service Connection Setup guide can make it easier to connect the applications, and can even help you run an initial synchronization.</span></span> <span data-ttu-id="9d8b9-130">Jos päätät käynnistää ensimmäisen synkronoinnin, [!INCLUDE[prod_short](includes/prod_short.md)] tarkistaa molempien sovellusten tiedot ja antaa suosituksia ensimmäisen synkronoinnin toteutusta varten.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-130">If you choose to run initial synchronization, [!INCLUDE[prod_short](includes/prod_short.md)] will review the data in both applications and provide recommendations for how to approach initial synchronization.</span></span> <span data-ttu-id="9d8b9-131">Seuraavassa taulukossa kuvaillaan näitä suosituksia.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-131">The following table describes the recommendations.</span></span>

|<span data-ttu-id="9d8b9-132">Suositus</span><span class="sxs-lookup"><span data-stu-id="9d8b9-132">Recommendation</span></span>  |<span data-ttu-id="9d8b9-133">Kuvaus</span><span class="sxs-lookup"><span data-stu-id="9d8b9-133">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="9d8b9-134">**Täysi synkronointi**</span><span class="sxs-lookup"><span data-stu-id="9d8b9-134">**Full synchronization**</span></span>|<span data-ttu-id="9d8b9-135">Tietoja on vain [!INCLUDE[prod_short](includes/prod_short.md)] -järjestelmässä tai vain [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -järjestelmässä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-135">Data exists only in [!INCLUDE[prod_short](includes/prod_short.md)], or only in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="9d8b9-136">Suositus on synkronoida toiseen palveluun kaikki tiedot palvelusta, jossa tiedot ovat.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-136">The recommendation is to synchronize all data from the service that has it to the other service.</span></span>|
|<span data-ttu-id="9d8b9-137">**Ei synkronointia**</span><span class="sxs-lookup"><span data-stu-id="9d8b9-137">**No synchronization**</span></span>|<span data-ttu-id="9d8b9-138">Molemmissa sovelluksissa on tietoja, ja täyden synkronoinnin suorittaminen loisi tietojen kaksoiskappaleita.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-138">Data exists in both applications, and running full synchronization would duplicate the data.</span></span> <span data-ttu-id="9d8b9-139">Suositus on yhdistää tietueet.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-139">The recommendation is to couple records.</span></span>|
|<span data-ttu-id="9d8b9-140">**Riippuvuus ei täyty**</span><span class="sxs-lookup"><span data-stu-id="9d8b9-140">**Dependency not satisfied**</span></span>|<span data-ttu-id="9d8b9-141">Molemmissa sovelluksissa on tietoja, mutta riviä tai taulukkoa ei voi synkronoida, koska se riippuu rivistä tai taulukosta, jossa on Ei synkronointia -suositus.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-141">Data exists in both applications, but the row or table cannot be synchronized because it depends on a row or table that has the No synchronization recommendation.</span></span> <span data-ttu-id="9d8b9-142">Jos esimerkiksi asiakkaita ei voi synkronoida, asiakastiedoista riippuvien kontaktien tietoja ei voi myöskään synkronoida.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-142">For example, if customers cannot be synchronized, then data for contacts that depends on the customer data cannot be synchronized either.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="9d8b9-143">Yleensä täysi synkronointi on käytössä vain, kun sovellukset integroidaan ensimmäistä kertaa ja vain yksi sovellus sisältää tietoja.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-143">Typically, you only use full synchronization when you're integrating the applications for the first time, and only one application contains data.</span></span> <span data-ttu-id="9d8b9-144">Täydellisestä synkronoinnista voi olla hyötyä demoympäristössä, koska se luo ja yhdistää tietueet automaattisesti kummassakin sovelluksessa, minkä ansiosta synkronoitujen tietojen käsittelemisen aloittaminen nopeutuu.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-144">Full synchronization can be useful in a demonstration environment because it automatically creates and couples records in each application, which makes it faster to start working with synchronized data.</span></span> <span data-ttu-id="9d8b9-145">Suorita täysi synkronointi kuitenkin vain, jos haluat taulukon yhdistämismäärityksille yhden rivin [!INCLUDE[prod_short](includes/prod_short.md)]issa kutakin [!INCLUDE[cds_long_md](includes/cds_long_md.md)]n riviä kohden.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-145">However, you should only run full synchronization if you want one row in [!INCLUDE[prod_short](includes/prod_short.md)] for each row in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] for the table mappings.</span></span> <span data-ttu-id="9d8b9-146">Muussa tapauksessa tuloksena voi olla tietueiden kaksoiskappaleita.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-146">Otherwise, the result can be duplicate records.</span></span>

1. <span data-ttu-id="9d8b9-147">Valitse ![Lamppu, joka avaa Kerro, mitä haluat tehdä -toiminnon](media/ui-search/search_small.png "Kerro, mitä haluat tehdä") -kuvake, syötä **Asetusten ohjattu määritys** ja valitse sitten liittyvä linkki.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-147">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Assisted Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="9d8b9-148">Käynnistä asetusten ohjattu määritys valitsemalla **Dataverse -yhteyden määritys**.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-148">Choose **Set up Dataverse connection** to start the assisted setup guide.</span></span>
3. <span data-ttu-id="9d8b9-149">Täytä tarvittavat kentät.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-149">Fill in the fields as necessary.</span></span>

> [!NOTE]
> <span data-ttu-id="9d8b9-150">Jos sinua ei pyydetä käyttämään kirjautumiseen järjestelmänvalvojan tiliä, syynä on luultavasti estetyt ponnahdusikkunat.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-150">If you are not prompted to sign in with your administrator account, it is probably because pop-ups are blocked.</span></span> <span data-ttu-id="9d8b9-151">Kirjautumista varten on sallittava ponnahdusikkunat osoitteesta `https://login.microsoftonline.com`.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-151">To sign in, allow pop-ups from `https://login.microsoftonline.com`.</span></span>

### <a name="to-create-or-maintain-the-connection-manually"></a><span data-ttu-id="9d8b9-152">Yhteyden luominen tai ylläpitäminen manuaalisesti</span><span class="sxs-lookup"><span data-stu-id="9d8b9-152">To create or maintain the connection manually</span></span>

<span data-ttu-id="9d8b9-153">Seuraavassa kerrotaan, miten yhteys määritetään manuaalisesti **Common Data Service -yhteyden määritys** -sivulla.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-153">The following procedure describes how to set up the connection manually on the **Common Data Service Connection Setup** page.</span></span> <span data-ttu-id="9d8b9-154">Tällä sivulla hallitaan myös integroinnin asetuksia.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-154">This is also the page where you manage settings for the integration.</span></span>

1. <span data-ttu-id="9d8b9-155">Valitse ![Lamppu, joka avaa Kerro, mitä haluat tehdä -toiminnon](media/ui-search/search_small.png "Kerro, mitä haluat tehdä") -kuvake, syötä **Common Data Service -yhteyden määritys** ja valitse sitten liittyvä linkki.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-155">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Common Data Service Connection Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="9d8b9-156">Anna seuraavat tiedot yhteyden muodostamiseen [!INCLUDE[prod_short](includes/prod_short.md)]ista [!INCLUDE[cds_long_md](includes/cds_long_md.md)]iin.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-156">Enter the following information for the connection from [!INCLUDE[prod_short](includes/prod_short.md)] to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>

    |<span data-ttu-id="9d8b9-157">Kenttä</span><span class="sxs-lookup"><span data-stu-id="9d8b9-157">Field</span></span>|<span data-ttu-id="9d8b9-158">Kuvaus</span><span class="sxs-lookup"><span data-stu-id="9d8b9-158">Description</span></span>|
    |-----|-----|
    |<span data-ttu-id="9d8b9-159">**Ympäristön URL-osoite**</span><span class="sxs-lookup"><span data-stu-id="9d8b9-159">**Environment URL**</span></span>|<span data-ttu-id="9d8b9-160">Jos [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:ssä on omia ympäristöjä, ne löytyvät ohjatun määrityksen suorittamisen yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-160">If you own environments in [!INCLUDE[cds_long_md](includes/cds_long_md.md)], we will find those for you when you run the setup guide.</span></span> <span data-ttu-id="9d8b9-161">Jos haluat muodostaa yhteyden toiseen ympäristöön eri vuokraajassa, voit syöttää ympäristön järjestelmänvalvojan tunnistetiedot. Ympäristö löytyy niiden avulla.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-161">If you want to connect to a different environment in another tenant, you can enter the administrator credentials for the environment and we will discover those.</span></span> |
    |<span data-ttu-id="9d8b9-162">**Käytössä**</span><span class="sxs-lookup"><span data-stu-id="9d8b9-162">**Enabled**</span></span>|<span data-ttu-id="9d8b9-163">Aloita integroinnin käyttäminen.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-163">Start using the integration.</span></span> <span data-ttu-id="9d8b9-164">Jos et ota yhteyttä käyttöön nyt, yhteysasetukset tallennetaan. Käyttäjät eivät kuitenkaan voi käyttää [!INCLUDE[cds_long_md](includes/cds_long_md.md)]in tietoja [!INCLUDE[prod_short](includes/prod_short.md)]ista.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-164">If you do not enable the connection now, the connection settings will be saved but users will not be able to access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] data from [!INCLUDE[prod_short](includes/prod_short.md)].</span></span> <span data-ttu-id="9d8b9-165">Voit palata tälle sivulle myöhemmin ottamaan yhteyden käyttöön.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-165">You can return to this page and enable the connection later.</span></span>  |

3. <span data-ttu-id="9d8b9-166">Valitse **Omistusmalli**-kentässä, haluatko [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:n tiimitaulukon vai jonkin tietyn käyttäjän omistavan uudet tietueet.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-166">In the **Ownership Model** field, choose whether you want a team table in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to own new records, or one or more specific users.</span></span> <span data-ttu-id="9d8b9-167">Jos valitset **Henkilö**-kohdan, sinun täytyy määrittää jokainen käyttäjä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-167">If you choose **Person**, you must specify each user.</span></span> <span data-ttu-id="9d8b9-168">Jos valitset **Tiimi**-kohdan oletusliiketoimintayksikkö näkyy **Yhdistetty liiketoimintayksikkö** -kentässä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-168">If you choose **Team**, the default business unit will display in the **Coupled Business Unit** field.</span></span>

    <!--Need to verify the details in this table, are these specific to Sales maybe?  IK: No they are not and no longer relevant 
    Enter the following advanced settings.-->

   <!-- |Field|Description|
    |-----|-----|
    |**[!INCLUDE[prod_short](includes/prod_short.md)] Users Must Map to CDS Users**|If you are using the Person ownership model, specify whether [!INCLUDE[prod_short](includes/prod_short.md)] user accounts must have a matching user accounts in [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. The **Microsoft 365 Authentication Email** of the [!INCLUDE[prod_short](includes/prod_short.md)] user must be the same as the **Primary Email** of the [!INCLUDE[crm_md](includes/crm_md.md)] user.<br /><br /> If you set the value to **Yes**, [!INCLUDE[prod_short](includes/prod_short.md)] users who do not have a matching [!INCLUDE[crm_md](includes/crm_md.md)] user account will not have [!INCLUDE[prod_short](includes/prod_short.md)] integration capabilities in the user interface. Access to [!INCLUDE[crm_md](includes/crm_md.md)] data directly from [!INCLUDE[prod_short](includes/prod_short.md)] is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] user account.<br /><br /> If you set the value to **No**, all [!INCLUDE[prod_short](includes/prod_short.md)] users will have [!INCLUDE[crm_md](includes/crm_md.md)] integration capabilities in the user interface. Access to [!INCLUDE[crm_md](includes/crm_md.md)] data is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] connection (integration) user.|
    |**Current Business Central Salesperson is Mapped to a User**|Indicates whether your user account is mapped to an account in [!INCLUDE[crm_md](includes/crm_md.md)] double check the name of this field-->|

4. <span data-ttu-id="9d8b9-169">Jos haluat testata yhteysasetukset, valitse **Yhteys** ja valitse sitten **Testaa yhteys**.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-169">To test the connection settings, choose **Connection**, and then **Test Connection**.</span></span>  

    > [!NOTE]  
    > <span data-ttu-id="9d8b9-170">Jos tietojen salaus ei ole käytössä [!INCLUDE[prod_short](includes/prod_short.md)]issa, sinulta kysytään, haluatko ottaa sen käyttöön.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-170">If data encryption is not enabled in [!INCLUDE[prod_short](includes/prod_short.md)], you will be asked whether you want to enable it.</span></span> <span data-ttu-id="9d8b9-171">Ota tietojen salaus käyttöön valitsemalla **Kyllä** ja määritä tarvittavat tiedot.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-171">To enable data encryption, choose **Yes** and provide the required information.</span></span> <span data-ttu-id="9d8b9-172">Valitse muussa tapauksessa **Ei**.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-172">Otherwise, choose **No**.</span></span> <span data-ttu-id="9d8b9-173">Voit ottaa tietojen salauksen käyttöön myöhemmin.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-173">You can enable data encryption later.</span></span> <span data-ttu-id="9d8b9-174">Lisätietoja on kehittäjän ja järjestelmänvalvojan ohjeen kohdassa [Tietojen salaus Dynamics 365 Business Centralissa](/dynamics365/business-central/dev-itpro/developer/devenv-encrypting-data).</span><span class="sxs-lookup"><span data-stu-id="9d8b9-174">For more information, see [Encrypting Data in Dynamics 365 Business Central](/dynamics365/business-central/dev-itpro/developer/devenv-encrypting-data) in the developer and administration help.</span></span>  

5. <span data-ttu-id="9d8b9-175">Jos [!INCLUDE[cds_long_md](includes/cds_long_md.md)]in synkronointia ei ole määritetty, sinulta kysytään, haluatko käyttää oletussynkronointiasetuksia.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-175">If [!INCLUDE[cds_long_md](includes/cds_long_md.md)] synchronization is not already set up, you will be asked whether you want to use the default synchronization setup.</span></span> <span data-ttu-id="9d8b9-176">Valitse **Kyllä** tai **Ei** sen mukaan, haluatko pitää [!INCLUDE[cds_long_md](includes/cds_long_md.md)]in ja [!INCLUDE[prod_short](includes/prod_short.md)]in tietueet kohdistettuina.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-176">Depending on whether you want to keep records aligned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and [!INCLUDE[prod_short](includes/prod_short.md)], choose **Yes** or **No**.</span></span>
<!--
## Show Me the Process

The following video shows the steps to connect [!INCLUDE[prod_short](includes/prod_short.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)]. <br>
  
> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4ArlP]

-->

## <a name="connecting-on-premises-versions"></a><span data-ttu-id="9d8b9-177">Paikallisten versioiden yhdistäminen</span><span class="sxs-lookup"><span data-stu-id="9d8b9-177">Connecting On-Premises Versions</span></span>

<span data-ttu-id="9d8b9-178">[!INCLUDE[prod_short](includes/prod_short.md)] on-premises -version yhdistäminen [!INCLUDE[cds_long_md](includes/cds_long_md.md)]en edellyttää, että **Common Data Service -yhteyden määritys** -sivulla määritetään joitakin tietoja.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-178">To connect [!INCLUDE[prod_short](includes/prod_short.md)] on-premises to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], you must specify some information on the **Common Data Service Connection Setup** page.</span></span>

<span data-ttu-id="9d8b9-179">Jos haluat muodostaa yhteyden käyttämällä Azure Active Directory (Azure AD) -tiliä, sovellus on rekisteröitävä Azure AD:ssä, minkä lisäksi on asennettava sovelluksen tunnus, avainsäilön salaisuus ja käytettävä uudelleenohjauksen URL-osoite.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-179">If you want to connect using an Azure Active Directory (Azure AD) account, you must register an application in Azure AD, and provide the application ID, key vault secret, and the redirect URL to use.</span></span> <span data-ttu-id="9d8b9-180">Uudelleenohjauksen URL-osoite täytetään valmiiksi, ja sen pitäisi toimia useimmissa asennuksissa.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-180">The redirect URL is pre-populated and should work for most installations.</span></span> <span data-ttu-id="9d8b9-181">Asennus on määritettävä käyttämään HTTPS-yhteyttä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-181">You must set up your installation to use HTTPS.</span></span> <span data-ttu-id="9d8b9-182">Lisätietoja on kohdassa [SSL:n määrittäminen suojaamaan Business Centralin verkkoasiakasohjelman yhteyttä](/dynamics365/business-central/dev-itpro/deployment/configure-ssl-web-client-connection).</span><span class="sxs-lookup"><span data-stu-id="9d8b9-182">For more information, see [Configuring SSL to Secure the Business Central Web Client Connection](/dynamics365/business-central/dev-itpro/deployment/configure-ssl-web-client-connection).</span></span> <span data-ttu-id="9d8b9-183">Jos palvelimelle määritetään jokin muu aloitussivu, URL-osoitteen voi vaihtaa.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-183">If you are setting up your server to have a different home page, you can always change the URL.</span></span> <span data-ttu-id="9d8b9-184">Asiakasohjelman salaisuus tallennetaan tietokantaan salattuna merkkijonona.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-184">The client secret will be saved as an encrypted string in your database.</span></span>  

### <a name="to-register-an-application-in-azure-ad-for-connecting-from-business-central-to-dataverse"></a><span data-ttu-id="9d8b9-185">Sovelluksen rekisteröiminen Azure AD:ssä muodostamaan yhteys Business Centralista Dataverseen</span><span class="sxs-lookup"><span data-stu-id="9d8b9-185">To register an application in Azure AD for connecting from Business Central to Dataverse</span></span>

<span data-ttu-id="9d8b9-186">Seuraavissa vaiheissa oletetaan, käyttäjätietojen ja käyttöoikeuksien hallintaan käytetään Azure AD:tä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-186">The following steps assume that you use Azure AD to manage identities and access.</span></span> <span data-ttu-id="9d8b9-187">Lisätietoja sovelluksen rekisteröimisestä Azure AD:ssä on kohdassa [Pika-aloitus: sovelluksen rekisteröinti Microsoftin idtable-ympäristössä](/azure/active-directory/develop/quickstart-register-app).</span><span class="sxs-lookup"><span data-stu-id="9d8b9-187">For more information about registering an application in Azure AD, see [Quickstart: Register an application with the Microsoft idtable platform](/azure/active-directory/develop/quickstart-register-app).</span></span> <span data-ttu-id="9d8b9-188">Jos Azure AD ei ole käytössä, lisätietoja on kohdassa [Jonkin muun Idtable- ja käyttöoikeuspalvelun käyttäminen](admin-how-to-set-up-a-dynamics-crm-connection.md#using-another-idtable-and-access-management-service).</span><span class="sxs-lookup"><span data-stu-id="9d8b9-188">If you do not use Azure AD, see [Using Another Idtable and Access Management Service](admin-how-to-set-up-a-dynamics-crm-connection.md#using-another-idtable-and-access-management-service).</span></span>  

1. <span data-ttu-id="9d8b9-189">Valitse Azure-portaalin **Hallinta**-kohdan siirtymisruudussa **Todennus**.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-189">In the Azure Portal, under **Manage** on the Navigation Pane, choose **Authentication**.</span></span>  
2. <span data-ttu-id="9d8b9-190">Lisää **Uudelleenohjauksen URL-osoite** -kohdassa [!INCLUDE[prod_short](includes/prod_short.md)]in **Common Data Service -yhteyden määritys** -sivulla ehdotettu uudelleenohjauksen URL-osoite.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-190">Under **Redirect URLs**, add the redirect URL that is suggested on the **Common Data Service Connection Setup** page in [!INCLUDE[prod_short](includes/prod_short.md)].</span></span>
3. <span data-ttu-id="9d8b9-191">Valitse **Hallinta**-kohdassa **API-käyttöoikeudet**.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-191">Under **Manage**, choose **API permissions**.</span></span>
4. <span data-ttu-id="9d8b9-192">Valitse **Määritetyt käyttöoikeudet** -kohdassa **Lisää käyttöoikeus** ja lisää sitten delegoidut käyttöoikeudet **Microsoftin API:t** -välilehdessä seuraavasti:</span><span class="sxs-lookup"><span data-stu-id="9d8b9-192">Under **Configured permissions**, choose **Add a permission**, and then add delegated permissions on the **Microsoft APIs** tab as follows:</span></span>
    * <span data-ttu-id="9d8b9-193">Business Central: lisää **Financials.ReadWrite.All**-käyttöoikeudet.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-193">For Business Central, add the **Financials.ReadWrite.All** permissions.</span></span>
    * <span data-ttu-id="9d8b9-194">Dynamics CRM: lisää **user_impersonation**-käyttöoikeudet.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-194">For Dynamics CRM, add the **user_impersonation** permissions.</span></span>  

    > [!NOTE]
    > <span data-ttu-id="9d8b9-195">Dynamics CRM -API:n nimi voi muuttua.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-195">The name of the Dynamics CRM API might change.</span></span>

5. <span data-ttu-id="9d8b9-196">Valitse **Hallinta**-kohdassa **Varmenteet ja salaiset avaimet** ja lue sitten sovellukselle uusi salaisuus.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-196">Under **Manage**, choose **Certificates & Secrets**, and then create a new secret for your app.</span></span> <span data-ttu-id="9d8b9-197">Salaista avainta joko käytetään [!INCLUDE[prod_short](includes/prod_short.md)]in **Common Data Service -yhteyden määritys** -sivun **Asiakasohjelman salainen avain** -kentässä tai se tallennetaan suojattuun tallennustilaan, josta se annetaan tapahtumaan tilaajassa aiemmin tässä aiheessa kuvatulla tavalla.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-197">You will use the secret either in [!INCLUDE[prod_short](includes/prod_short.md)], in the **Client Secret** field on the **Common Data Service Connection Setup** page, or store in a secure storage and provide it in an event subscriber as described earlier in this topic.</span></span>
6. <span data-ttu-id="9d8b9-198">Valitse **Yleiskuvaus** ja etsi sitten **Sovelluksen (asiakasohjelman) tunnus** -arvo.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-198">Choose **Overview**, and then find the **Application (client) ID** value.</span></span> <span data-ttu-id="9d8b9-199">Tämä on sovelluksen asiakasohjelman tunnus.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-199">This is the Client ID of your application.</span></span> <span data-ttu-id="9d8b9-200">Se on joko annettava **Common Data Service -yhteyden määritys** -sivun **Asiakasohjelman tunnus** -kentässä tai tallennettava suojattuun tallennustilaan tapahtuman tilaajassa annettavaksi.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-200">You must enter it either on the **Common Data Service Connection Setup** page in the **Client ID** field, or store it in a secure storage and provide it in an event subscriber.</span></span>
7. <span data-ttu-id="9d8b9-201">Anna [!INCLUDE[prod_short](includes/prod_short.md)]in **Common Data Service -yhteyden määritys** -sivun **Ympäristön URL-osoite** -kentässä [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -ympäristön URL-osoite.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-201">In [!INCLUDE[prod_short](includes/prod_short.md)], on the **Common Data Service Connection Setup** page, in the **Environment URL** field, enter the URL for your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment.</span></span>
8. <span data-ttu-id="9d8b9-202">[!INCLUDE[cds_long_md](includes/cds_long_md.md)] -yhteys otetaan käyttöön **Käytössä**-valitsimella.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-202">To enable the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], turn on the **Enabled** toggle.</span></span>
9. <span data-ttu-id="9d8b9-203">Käytä kirjautumiseen Azure Active Directoryn järjestelmänvalvojan tiliä. (Tämä tili tarvitsee voimassaolevan [!INCLUDE[cds_long_md](includes/cds_long_md.md)]n käyttöoikeuden, ja sen on oltava [!INCLUDE[cds_long_md](includes/cds_long_md.md)] -ympäristön järjestelmänvalvoja.)</span><span class="sxs-lookup"><span data-stu-id="9d8b9-203">Sign in with your administrator account for Azure Active Directory (this account must have a valid license for [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and be an administrator in your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment).</span></span> <span data-ttu-id="9d8b9-204">Kirjautumisen jälkeen sinua pyydetään antamaan rekisteröidylle sovellukselle lupa kirjautua [!INCLUDE[cds_long_md](includes/cds_long_md.md)]en organisaation puolesta.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-204">After you sign in you will be prompted to allow your registered application to sign in to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on behalf of the organization.</span></span> <span data-ttu-id="9d8b9-205">Määrityksen valmistumisen edellyttää tämän luvan antamista.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-205">You must give consent to complete the setup.</span></span>

   > [!NOTE]
   > <span data-ttu-id="9d8b9-206">Jos sinua ei pyydetä käyttämään kirjautumiseen järjestelmänvalvojan tiliä, syynä on luultavasti estetyt ponnahdusikkunat.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-206">If you are not prompted to sign in with your administrator account, it is probably because pop ups are blocked.</span></span> <span data-ttu-id="9d8b9-207">Kirjautumista varten on sallittava ponnahdusikkunat osoitteesta `https://login.microsoftonline.com`.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-207">To sign in, allow pop-ups from `https://login.microsoftonline.com`.</span></span>

#### <a name="using-another-idtable-and-access-management-service"></a><span data-ttu-id="9d8b9-208">Jonkin muun Idtable- ja käyttöoikeuspalvelun käyttäminen</span><span class="sxs-lookup"><span data-stu-id="9d8b9-208">Using Another Idtable and Access Management Service</span></span>

<span data-ttu-id="9d8b9-209">Jos Azure Active Directorya ei käytetä käyttäjätietojen ja käyttöoikeuksien hallintaa, apua on pyydettävä kehittäjältä.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-209">If you are not using Azure Active Directory to manage identities and access, you will need some help from a developer.</span></span> <span data-ttu-id="9d8b9-210">Jos haluat tallentaa sovelluksen tunnuksen ja salaisen avaimen eri sijaintiin, Asiakasohjelman tunnus- ja Asiakasohjelman salainen avain -kentät voidaan jättää tyhjäksi. Tunnuksen ja salaisen avaimen sijainnista noutoa varten on siinä tapauksessa kirjoitettava laajennus.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-210">If you prefer to store the app ID and secret in a different location, you can leave the Client ID and Client Secret fields blank and write an extension to fetch the ID and secret from the location.</span></span> <span data-ttu-id="9d8b9-211">Salainen avain voidaan antaa suorituspalvelussa tilaamalla OnGetCDSConnectionClientId- ja OnGetCDSConnectionClientSecret-tapahtumat codeunitissa 7201 CDS Integration Impl.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-211">You can provide the secret at runtime by subscribing to the OnGetCDSConnectionClientId and OnGetCDSConnectionClientSecret events in codeunit 7201 "CDS Integration Impl."</span></span>

### <a name="to-disconnect-from-cds_long_md"></a><span data-ttu-id="9d8b9-212">[!INCLUDE[cds_long_md](includes/cds_long_md.md)] -yhteyden katkaiseminen</span><span class="sxs-lookup"><span data-stu-id="9d8b9-212">To disconnect from [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span></span>

1. <span data-ttu-id="9d8b9-213">Valitse ![Lamppu, joka avaa Kerro, mitä haluat tehdä -toiminnon](media/ui-search/search_small.png "Kerro, mitä haluat tehdä") -kuvake, syötä **Common Data Service -yhteyden määritys** ja valitse sitten liittyvä linkki.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-213">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Common Data Service Connection Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="9d8b9-214">Poista käytöstä **Common Data Service -yhteyden määritys** -sivulla **Käytössä**-valitsin.</span><span class="sxs-lookup"><span data-stu-id="9d8b9-214">On the **Common Data Service Connection Setup** page, turn off the **Enabled** toggle.</span></span>  

## <a name="see-also"></a><span data-ttu-id="9d8b9-215">Katso myös</span><span class="sxs-lookup"><span data-stu-id="9d8b9-215">See Also</span></span>

[<span data-ttu-id="9d8b9-216">Synkronoinnin tilan näyttäminen</span><span class="sxs-lookup"><span data-stu-id="9d8b9-216">View the Status of a Synchronization</span></span>](admin-how-to-view-synchronization-status.md)  
