---
title: "Töiden aikatauluttaminen automaattisesti suoritettavaksi | Microsoft Docs"
description: "Ajoitettuja tehtäviä hallitaan työjonon avulla. Näillä töillä suoritetaan raportteja ja codeuniteja. Voit määrittää töitä suoritettavaksi yhtä aikaa tai toistuvasti."
author: edupont04
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: 
ms.date: 10/01/2018
ms.author: edupont
ms.translationtype: HT
ms.sourcegitcommit: 33b900f1ac9e295921e7f3d6ea72cc93939d8a1b
ms.openlocfilehash: ad0f99509ff1a191c62dd1c3a6d569c9884ea851
ms.contentlocale: fi-fi
ms.lasthandoff: 11/26/2018

---
# <a name="use-job-queues-to-schedule-tasks"></a><span data-ttu-id="7bf61-105">Käytä työjonoja ajoitustehtäviin</span><span class="sxs-lookup"><span data-stu-id="7bf61-105">Use Job Queues to Schedule Tasks</span></span>
<span data-ttu-id="7bf61-106">[!INCLUDE[d365fin](includes/d365fin_md.md)]:n työjonojen avulla käyttäjät voivat ajoittaa ja suorittaa tiettyjä raportteja ja koodiyksiköitä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-106">Job queues in [!INCLUDE[d365fin](includes/d365fin_md.md)] enables users to schedule and run specific reports and codeunits.</span></span> <span data-ttu-id="7bf61-107">Voit määrittää töitä suoritettavaksi yhtä aikaa tai toistuvasti.</span><span class="sxs-lookup"><span data-stu-id="7bf61-107">You can set jobs to run one time, or on a recurring basis.</span></span> <span data-ttu-id="7bf61-108">Esimerkiksi **Myyjä - Myyntitilasto** -raportti saatetaan haluta suorittaa viikoittain myyjän viikkokohtaisen myynnin seurantaa varten. **Käsittele huoltosähköpostijono** -koodiyksikkö voidaan taas suorittaa päivittäin ja varmistaa näin, että huoltotilauksiin liittyvät odottavat sähköpostit lähetetään asiakkaille ajallaan.</span><span class="sxs-lookup"><span data-stu-id="7bf61-108">For example, you might want to run the **Salesperson - Sales Statistics** report weekly, to track sales by salesperson each week, or you might want to run the **Process Service E-mail Queue** codeunit daily, to make sure pending email messages to customers regarding their service orders are sent out in a timely manner.</span></span>  

## <a name="add-jobs-to-the-job-queue"></a><span data-ttu-id="7bf61-109">Töiden lisääminen työjonoon</span><span class="sxs-lookup"><span data-stu-id="7bf61-109">Add Jobs to the Job Queue</span></span>
<span data-ttu-id="7bf61-110">**Työjonon tapahtumat** -sivulla on luettelo kaikista aiemmin luoduista töistä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-110">The **Job Queue Entries** page lists all existing jobs.</span></span> <span data-ttu-id="7bf61-111">Jos lisäät uuden aikataulutettavan työjonotapahtuman tiedot, sinun on ilmoitettava minkä tyyppisen objektin, kuten raportin tai codeunitin, haluat suorittaa, sekä suoritettavan objektin nimen ja tunnuksen.</span><span class="sxs-lookup"><span data-stu-id="7bf61-111">If you add a new job queue entry that you want to schedule, you must specify information about the type of object you want to run, such as a report or codeunit, and the name and object ID of the object that you want to run.</span></span> <span data-ttu-id="7bf61-112">Voit myös lisätä parametrit, joilla määritetään työjonotapahtuman käytös.</span><span class="sxs-lookup"><span data-stu-id="7bf61-112">You can also add parameters to specify the behavior of the job queue entry.</span></span> <span data-ttu-id="7bf61-113">Voit esimerkiksi lisätä parametrin vain kirjattujen myyntitilausten lähettämistä varten.</span><span class="sxs-lookup"><span data-stu-id="7bf61-113">For example, you can add a parameter to only send posted sales orders.</span></span> <span data-ttu-id="7bf61-114">Sinulla tulee olla tietyn raportin tai koodiyksikön suoritusoikeus tai muutoin järjestelmä palauttaa virheen, kun työjonoa suoritetaan.</span><span class="sxs-lookup"><span data-stu-id="7bf61-114">You must have permission to run the particular report or codeunit, or an error will be returned when the job queue is run.</span></span>  

<span data-ttu-id="7bf61-115">Vaihtoehtoisesti voit määrittää suodattimen **Työjonoluokan suodatin** -kentässä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-115">Optionally, you can set a filter in the **Job Queue Category Filter** field.</span></span> <span data-ttu-id="7bf61-116">Luettelon töitä voi ryhmitellä työjonoluokkien avulla.</span><span class="sxs-lookup"><span data-stu-id="7bf61-116">Job queue categories can be used to group jobs in the list.</span></span>

[!INCLUDE[d365fin](includes/d365fin_md.md)] <span data-ttu-id="7bf61-117">suorittaa työt automaattisesti kullekin työjonotapahtumalle määritetyn aikataulun mukaan.</span><span class="sxs-lookup"><span data-stu-id="7bf61-117">automatically runs the jobs according to the specified schedules for each job queue entry.</span></span> <span data-ttu-id="7bf61-118">Työjonotapahtuman voi myös käynnistää, pysäyttää ja asettaa pitoon manuaalisesti.</span><span class="sxs-lookup"><span data-stu-id="7bf61-118">You can also start, stop, and put a job queue entry on hold manually.</span></span>

### <a name="log-files"></a><span data-ttu-id="7bf61-119">Lokitiedostot</span><span class="sxs-lookup"><span data-stu-id="7bf61-119">Log Files</span></span>
<span data-ttu-id="7bf61-120">Virheet näkyvät **Työjonon lokitapahtumat** -sivulla, jonka voi avata valintanauhasta.</span><span class="sxs-lookup"><span data-stu-id="7bf61-120">Errors are listed on the **Job Queue Log Entries** page that you can access from the ribbon.</span></span> <span data-ttu-id="7bf61-121">Voit myös määrittää vian työjonon virheissä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-121">You can also troubleshoot job queue errors.</span></span> <span data-ttu-id="7bf61-122">Työjonon suorituksen yhteydessä luodut tiedot tallennetaan tietokantaan.</span><span class="sxs-lookup"><span data-stu-id="7bf61-122">Data that is generated when a job queue is run is stored in the database.</span></span>  

### <a name="background-posting-with-job-queues"></a><span data-ttu-id="7bf61-123">Taustakirjaus työjonojen avulla</span><span class="sxs-lookup"><span data-stu-id="7bf61-123">Background Posting with Job Queues</span></span>
<span data-ttu-id="7bf61-124">Työjonot ovat tehokas väline liiketoiminnan prosessien suorituksen ajoittamiseen.</span><span class="sxs-lookup"><span data-stu-id="7bf61-124">Job queues are an effective tool to schedule the running of business processes in the background.</span></span> <span data-ttu-id="7bf61-125">Esille voi tulla instanssi, jossa useat käyttäjät yrittävät kirjata myyntitilauksia samanaikaisesti, mutta käsittelyssä voi olla vain yksi tilaus kerrallaan.</span><span class="sxs-lookup"><span data-stu-id="7bf61-125">For example, there may be an instance in which multiple users are trying to post sales orders at the same time, but only one order can be processed at a time.</span></span> <span data-ttu-id="7bf61-126">Määrittämällä taustakirjausrutiinin, voit sijoittaa kirjauksia jonoon taustalla käsittelyä varten.</span><span class="sxs-lookup"><span data-stu-id="7bf61-126">By setting up a background posting routine, you can place the postings in a queue for processing in the background.</span></span>  

 <span data-ttu-id="7bf61-127">Vaihtoehtoisesti voit ajoittaa kirjaukset tunneille, jotka sopivat parhaiten organisaatiollesi.</span><span class="sxs-lookup"><span data-stu-id="7bf61-127">Alternatively, you may want to schedule postings for hours when it is convenient for your organization.</span></span> <span data-ttu-id="7bf61-128">Saattaa olla hyödyllistä ajaa yrityksessä tietyt toiminnot sen jälkeen, kun suurin osa päivän tietojen syötöistä on suoritettu.</span><span class="sxs-lookup"><span data-stu-id="7bf61-128">For example, it may make sense in your business to run certain routines when most of the data entry for the day has concluded.</span></span> <span data-ttu-id="7bf61-129">Tämä on mahdollista, kun asetat työjonon ajamaan useita eräkirjausraportteja, kuten **Eräkirjaa myyntitilaukset**-, **Eräkirjaa ostotilaukset**- ja **Eräkirjaa myyntihyvityslaskut** -raportit.</span><span class="sxs-lookup"><span data-stu-id="7bf61-129">You can achieve this by setting the job queue up to run various batch post reports, such as the **Batch Post Sales Orders**, **Batch Post Sales Invoices**, and **Batch Post Sales Credit Memos** reports.</span></span>  

 [!INCLUDE[d365fin](includes/d365fin_md.md)] <span data-ttu-id="7bf61-130">tukee taustakirjausta seuraavilla asiakirjatyypeillä:</span><span class="sxs-lookup"><span data-stu-id="7bf61-130">supports background posting for the following document types:</span></span>  

-   <span data-ttu-id="7bf61-131">Myynti: myyntitilaus, palautustilaus, hyvityslasku, lasku</span><span class="sxs-lookup"><span data-stu-id="7bf61-131">Sales: sales order, return order, credit memo, invoice</span></span>  

-   <span data-ttu-id="7bf61-132">Ostot: ostotilaus, palautustilaus, hyvityslasku, lasku</span><span class="sxs-lookup"><span data-stu-id="7bf61-132">Purchases: purchase order, return order, credit memo, invoice</span></span>  

 <span data-ttu-id="7bf61-133">Jos työjono ei voi kirjata myyntitilausta, tilaksi muutetaan **Virhe** ja myyntitilaus lisätään niiden myyntitilausten luetteloon, jotka käyttäjän on käsiteltävä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-133">If the job queue cannot post the sales order, the status is changed to **Error**, and the sales order is added to the list of sales orders that the user will have to handle.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="7bf61-134">Kun aikataulutat asiakirjan kirjaamisen ja kirjausprosessi alkaa, kirjausrutiini määritetään automaattisesti aikakatkaistavaksi kahden tunnin kuluessa, jos kirjausrutiini lopettaa vastaamisen jostakin syystä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-134">When you schedule a document for posting and the posting process begins, the posting routine is automatically configured to time out within two hours if the posting routine stops responding for any reason.</span></span>  

<span data-ttu-id="7bf61-135">Voit määrittää tällaisen työjonon käytön **Myyntien ja myyntisaamisten asetukset**- tai **Ostot ja ostovelat** -sivulla.</span><span class="sxs-lookup"><span data-stu-id="7bf61-135">You set up this use of the job queue on the **Sales & Receivables Setup** page or the **Purchases & Payables** page, respectively.</span></span> <span data-ttu-id="7bf61-136">Valitse **Taustakirjaus**-pikavälilehdessä **Kirjaa asiakirjat työjonon kautta** -valintaruutu ja täytä tarvittavat tiedot.</span><span class="sxs-lookup"><span data-stu-id="7bf61-136">On the **Background Posting** FastTab, you choose the **Post Documents via Job Queue** check box and then fill in the relevant information.</span></span> <span data-ttu-id="7bf61-137">Voit myös suorittaa täällä kaikki kyseisen koodin työjonotapahtumat **Työjonoluokan koodi** -kentän avulla.</span><span class="sxs-lookup"><span data-stu-id="7bf61-137">Here you can also use the **Job Queue Category Code** field to run all job queue entries with that code.</span></span> <span data-ttu-id="7bf61-138">Voit käyttää esimerkiksi **Mkirjaus**-luokkaa suodattamaan kaikki myyntitilaukset, jotka vastaavat mitä tahansa työjonoa, jolla on sama luokkakoodi.</span><span class="sxs-lookup"><span data-stu-id="7bf61-138">For example, you can use  a **SalesPost** category that filters to all sales orders that match any job queue that has the same category code.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="7bf61-139">Jos määrität asiakirjat kirjaavan ja tulostavan työn ja tulostimessa avautuu valintaikkuna, kuten tunnistetietojen pyyntö tai tulostimen musteen loppumisesta ilmoittava varoitus, asiakirja kirjataan mutta sitä ei tulosteta.</span><span class="sxs-lookup"><span data-stu-id="7bf61-139">If you set up a job that will post and print documents, and the printer displays a dialog box, such as a request for credentials or a warning about low printer ink, your document is posted but not printed.</span></span> <span data-ttu-id="7bf61-140">Vastaava työjonotapahtuma aikakatkaistaan lopulta, ja **Tila**-kentän arvoksi määritetään **Virhe**.</span><span class="sxs-lookup"><span data-stu-id="7bf61-140">The corresponding job queue entry eventually times out and the **Status** field is set to **Error**.</span></span> <span data-ttu-id="7bf61-141">Näin ollen suosittelemme, että et käytä tulostimen asetuksia, jotka edellyttävät vuorovaikutusta tulostimen näytön valintaruutujen kanssa taustakirjausten yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-141">Accordingly, we recommend that you do not use a printer setup that requires interaction with the display of printer dialog boxes in conjunction with background posting.</span></span>  

## <a name="use-the-my-job-queue-part"></a><span data-ttu-id="7bf61-142">Oma työjono -osan käyttäminen</span><span class="sxs-lookup"><span data-stu-id="7bf61-142">Use the My Job Queue Part</span></span>
<span data-ttu-id="7bf61-143">**Oma työjono** osaa näyttää työjonotapahtumat, jotka käyttäjä on aloittanut, mutta jotka eivät ole vielä valmiit.</span><span class="sxs-lookup"><span data-stu-id="7bf61-143">The **My Job Queue** part shows the job queues entries that a user has started, but which are not yet finished.</span></span> <span data-ttu-id="7bf61-144">Oletusarvoisesti osa ei ole näkyvissä, joten se on lisättävä omaan roolikeskukseesi.</span><span class="sxs-lookup"><span data-stu-id="7bf61-144">By default, the part is not visible, so you have to add it to your Role Center.</span></span> <span data-ttu-id="7bf61-145">Lisätietoja on kohdassa [Perusasetusten muuttaminen](ui-change-basic-settings.md).</span><span class="sxs-lookup"><span data-stu-id="7bf61-145">For more information, see [Changing Basic Settings](ui-change-basic-settings.md).</span></span>  

<span data-ttu-id="7bf61-146">Tässä osassa näet käsiteltävinä tai jonossa olevat asiakirjat, joita varten tunnuksesi on määritetty **Määritetty käyttäjätunnus** -kentässä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-146">In this part, you can see those documents that are being processed or that are queued for which your ID is specified in the **Assigned User ID** field.</span></span> <span data-ttu-id="7bf61-147">Osan avulla voit seurata kaikkia työjonon tapahtumia, mukaan lukien taustakirjauksia.</span><span class="sxs-lookup"><span data-stu-id="7bf61-147">The part helps you keep track of all job queue entries, including those related to background posting.</span></span> <span data-ttu-id="7bf61-148">Osa tietää yhdellä silmäyksellä, onko asiakirjan kirjaamisessa tai työjonon tapahtumissa tapahtunut virheitä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-148">The part can tell you at a glance whether there has been an error in the posting of a document or if there are errors in a job queue entry.</span></span> <span data-ttu-id="7bf61-149">Osan avulla voit peruuttaa kun asiakirjan kirjaamisen, jos se ei ole käynnissä.</span><span class="sxs-lookup"><span data-stu-id="7bf61-149">The part also lets you cancel a document posting if it is not running.</span></span>  

## <a name="security"></a><span data-ttu-id="7bf61-150">Suojaus</span><span class="sxs-lookup"><span data-stu-id="7bf61-150">Security</span></span>  
<span data-ttu-id="7bf61-151">Työjonon tapahtumien suoritus perustuu käyttöoikeuksiin.</span><span class="sxs-lookup"><span data-stu-id="7bf61-151">Job queue entries run based on permissions.</span></span> <span data-ttu-id="7bf61-152">Kyseiset oikeudet on sallittava raportin tai koodiyksikön toteuttamiseen.</span><span class="sxs-lookup"><span data-stu-id="7bf61-152">Those permissions must allow the execution of the report or codeunit.</span></span>  

<span data-ttu-id="7bf61-153">Kun työjono on aktivoitu manuaalisesti, se suoritetaan käyttäjän tunnistetiedoilla.</span><span class="sxs-lookup"><span data-stu-id="7bf61-153">When a job queue is activated manually, it is run with the credentials of the user.</span></span> <span data-ttu-id="7bf61-154">Kun työjono on aktivoitu ajoitettuna tehtävänä, se suoritetaan palvelininstanssin tunnistetiedoilla.</span><span class="sxs-lookup"><span data-stu-id="7bf61-154">When a job queue is activated as a scheduled task, it is run with the credentials of the server instance.</span></span> <span data-ttu-id="7bf61-155">Kun työ on suoritettu, se suoritetaan sen aktivoivan työjonon tunnistetiedoilla.</span><span class="sxs-lookup"><span data-stu-id="7bf61-155">When a job is run, it is run with the credentials of the job queue that activates it.</span></span> <span data-ttu-id="7bf61-156">Työjonon luoneella käyttäjällä on oltava myös käyttöoikeudet.</span><span class="sxs-lookup"><span data-stu-id="7bf61-156">However, the user who created that job queue entry must also have permissions.</span></span> <span data-ttu-id="7bf61-157">Kun kyse suorita käyttäjäistunnossa -työnä (esimerkiksi taustakirjauksissa), se suoritetaan kyseisen työn luoneen käyttäjän tunnistetiedoilla.</span><span class="sxs-lookup"><span data-stu-id="7bf61-157">When a job is “run in user session” (such as during background posting), it is run with the credentials of the user who created that job.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="7bf61-158">Jos käytät [!INCLUDE[d365fin](includes/d365fin_md.md)]in mukana toimitettuja pääkäyttöoikeusjoukkoa, sinulla ja käyttäjillä oikeudet suorittaa kaikki objektit.</span><span class="sxs-lookup"><span data-stu-id="7bf61-158">If you use the SUPER permissions set that comes with [!INCLUDE[d365fin](includes/d365fin_md.md)], you and your users have permissions to run all objects.</span></span> <span data-ttu-id="7bf61-159">Tässä tapauksessa kunkin käyttäjän käyttöoikeutta rajoittavat vain tietojen käyttöoikeudet.</span><span class="sxs-lookup"><span data-stu-id="7bf61-159">In this case, access for each user is only limited by permissions for data.</span></span>  

## <a name="using-job-queues-effectively"></a><span data-ttu-id="7bf61-160">Käytetään työjonoja tehokkaasti</span><span class="sxs-lookup"><span data-stu-id="7bf61-160">Using Job Queues Effectively</span></span>  
<span data-ttu-id="7bf61-161">Työjonotapahtuma-tietueella on monta kenttää, joiden tarkoituksena on viedä parametrejä koodiyksikölle, jonka olet määrittänyt ajettavaksi työjonossa.</span><span class="sxs-lookup"><span data-stu-id="7bf61-161">The job queue entry record has many fields whose purpose is to carry parameters into a codeunit that you have specified to be run with a job queue.</span></span> <span data-ttu-id="7bf61-162">Tämä tarkoittaa myös sitä, että koodiyksiköt, jotka suoritetaan työjonon kautta, on määritettävä työjonotapahtumatietueessa **OnRun**-käynnistimen parametrina.</span><span class="sxs-lookup"><span data-stu-id="7bf61-162">This also means that codeunits that are to be run via the job queue must be specified with the Job Queue Entry record as a parameter in the **OnRun** trigger.</span></span> <span data-ttu-id="7bf61-163">Tämä auttaa parantamaan tietoturvaa, sillä se estää käyttäjiä suorittamasta satunnaisia koodiyksiköitä työjonon kautta.</span><span class="sxs-lookup"><span data-stu-id="7bf61-163">This helps provide an extra level of security, as this prevents users from running random codeunits via the job queue.</span></span> <span data-ttu-id="7bf61-164">Jos käyttäjän on välitettävä raportoitavat parametrit, raportti on suoritettava koodiyksikössä, joka jäsentää syöttöparametrit ja syöttää ne raporttiin ennen sen suoritusta.</span><span class="sxs-lookup"><span data-stu-id="7bf61-164">If the user must pass parameters to a report, the only way to do this is by wrapping the report execution into a codeunit, which then parses the input parameters and enters them into the report before executing it.</span></span>  

## <a name="see-also"></a><span data-ttu-id="7bf61-165">Katso myös</span><span class="sxs-lookup"><span data-stu-id="7bf61-165">See Also</span></span>  
[<span data-ttu-id="7bf61-166">Hallinta</span><span class="sxs-lookup"><span data-stu-id="7bf61-166">Administration</span></span>](admin-setup-and-administration.md)  
[<span data-ttu-id="7bf61-167">Business Central -sovelluksen määrittäminen</span><span class="sxs-lookup"><span data-stu-id="7bf61-167">Setting Up Business Central</span></span>](setup.md)  

